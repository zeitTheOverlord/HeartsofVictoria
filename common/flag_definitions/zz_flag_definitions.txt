# common variables
@coa_width = 768
@coa_height = 512
@canton_scale_cross_x = @[ ( 333 / coa_width ) + 0.001 ]
@canton_scale_cross_y = @[ ( 205 / coa_height ) + 0.001 ]
@canton_scale_sweden_x = @[ ( 255 / coa_width ) + 0.001 ]
@canton_scale_sweden_y = @[ ( 204 / coa_height ) + 0.001 ]
@canton_scale_norway_x = @[ ( 192 / coa_width ) + 0.001 ]
@canton_scale_norway_y = @[ ( 192 / coa_height ) + 0.001 ]
@canton_scale_denmark_x = @[ ( 220 / coa_width ) + 0.001 ]
@canton_scale_denmark_y = @[ ( 220 / coa_height ) + 0.001 ]
@third = @[1/3]

GER = { # Germany
	flag_definition = {
		coa = GER
		subject_canton = GER
		priority = 110
		trigger = {
			OR = {
				coa_def_germany_formed_by_prussia_trigger = yes
				coa_def_ger_bwr_flag_override_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = GER_iron_cross
		subject_canton = GER_iron_cross
		priority = 115
		trigger = {
			coa_def_autocracy_flag_trigger = yes		
			OR = {
				coa_def_germany_formed_by_prussia_trigger = yes
				coa_def_ger_bwr_flag_override_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = GER_modern
		subject_canton = GER_modern
		priority = 120
		trigger = {
			OR = {
				coa_def_republic_flag_trigger = yes
				NOR = { 
					coa_def_germany_formed_by_prussia_trigger = yes
					coa_def_germany_formed_by_hanover_trigger = yes
					coa_def_germany_formed_by_bavaria_trigger = yes
					coa_def_germany_formed_by_saxony_trigger = yes
					coa_def_germany_formed_by_wurttemberg_trigger = yes
				}
				AND = {
					OR = {
						coa_def_germany_formed_by_prussia_trigger = yes
						coa_def_germany_formed_by_hanover_trigger = yes
						coa_def_germany_formed_by_bavaria_trigger = yes
						coa_def_germany_formed_by_saxony_trigger = yes
						coa_def_germany_formed_by_wurttemberg_trigger = yes						
					}
					coa_def_ger_brg_flag_override_trigger = yes
				}
			}
			NOT = { coa_def_ger_bwr_flag_override_trigger = yes }			
		}
	}
	flag_definition = {
		coa = GER_dictatorship
		subject_canton = GER_dictatorship
		priority = 15
		trigger = { 
			coa_def_dictatorship_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = GER_communist
		subject_canton = GER_modern
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = GER_fascist
		subject_canton = GER_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = GER_war_flag_prussian
		subject_canton = GER
		priority = 200
		trigger = {
			OR = {
				coa_def_germany_formed_by_prussia_trigger = yes
				AND = {
					NOT = { coa_def_germany_formed_by_prussia_trigger = yes }
					coa_def_ger_bwr_flag_override_trigger = yes
				}
			}
			coa_def_monarchy_flag_trigger = yes
			coa_def_war_flag_trigger = yes
			NOT = { has_game_rule = no_war_flags }
			NOT = { coa_def_ger_brg_flag_override_trigger = yes }
		}
	}
	flag_definition = {
		coa = GER_war_flag_monarchy
		subject_canton = GER_modern
		priority = 200
		trigger = {
			OR = {
				NOT = { coa_def_germany_formed_by_prussia_trigger = yes }
				OR = {
					coa_def_ger_brg_warflag_civil_override_trigger = yes
					AND = {
						coa_def_germany_formed_by_prussia_trigger = yes
						coa_def_ger_brg_flag_override_trigger = yes	
					}
				}
			}
			OR = {
				AND = {
					coa_def_monarchy_flag_trigger = yes
					coa_def_war_flag_trigger = yes
					NOT = { has_game_rule = no_war_flags }
					NOT = { coa_def_ger_bwr_flag_override_trigger = yes }
				}
				coa_def_ger_brg_warflag_civil_override_trigger = yes	
			}
		}	
	}

	### country-specific Germany variants ###

	flag_definition = {
		coa = GER_bavarian
		subject_canton = GER_bavarian
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				OR = {
					was_formed_from = BAV
					coa_def_germany_formed_by_bavaria_trigger = yes
				}
			}
			NOT = {
				coa_def_ger_brg_flag_override_trigger = yes
			}
		}
	}	
	flag_definition = {
		coa = GER_war_flag_monarchy
		subject_canton = GER_modern
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				was_formed_from = AUS
			}
		}
	}	

	flag_definition = {
		coa = GER_saxon
		subject_canton = GER_saxon
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				OR = {
					was_formed_from = SAX
					coa_def_germany_formed_by_saxony_trigger = yes
				}
			}
			NOT = {
				coa_def_ger_brg_flag_override_trigger = yes
			}
		}
	}

	flag_definition = {
		coa = GER_saxon_monarchist
		subject_canton = GER_saxon
		priority = 110
		trigger = {
			coa_def_absolute_monarchy_flag_trigger = yes
			exists = scope:actor
			scope:actor = {
				OR = {
					was_formed_from = SAX
					coa_def_germany_formed_by_saxony_trigger = yes
				}
			}
			NOT = {
				coa_def_ger_brg_flag_override_trigger = yes
			}
		}
	}

	flag_definition = {
		coa = GER_hannover
		subject_canton = GER_modern
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				OR = {
					was_formed_from = HAN
					coa_def_germany_formed_by_hanover_trigger = yes
				}
			}
			NOT = {
				coa_def_ger_brg_flag_override_trigger = yes
			}
		}
	}

	flag_definition = {
		coa = GER_wurttemberg
		subject_canton = GER_modern
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				OR = {
					was_formed_from = WUR
					coa_def_germany_formed_by_wurttemberg_trigger = yes
				}
			}
			NOT = {
				coa_def_ger_brg_flag_override_trigger = yes
			}
		}
	}
}		


GGR = { # Greater Germany
	includes = GER
	flag_definition = {
		coa = GGR_fascist
		subject_canton = GGR_fascist
		priority = 500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}	
}

TUR = { # Turkey
	flag_definition = {
		coa = TUR
		subject_canton = TUR
		allow_overlord_canton = yes		
		coa_with_overlord_canton = TUR_subject			
		priority = 1
	}	
	flag_definition = {
		coa = TUR_monarchy
		subject_canton = TUR_monarchy
		allow_overlord_canton = yes		
		coa_with_overlord_canton = TUR_subject			
		priority = 5
		trigger = { 
			coa_def_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TUR	
		subject_canton = TUR
		allow_overlord_canton = yes		
		coa_with_overlord_canton = TUR_subject			
		priority = 20
		trigger = { 
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = TUR_republic
		subject_canton = TUR_republic
		allow_overlord_canton = yes		
		coa_with_overlord_canton = TUR_republic_subject			
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TUR_dictatorship
		subject_canton = TUR_dictatorship
		allow_overlord_canton = yes		
		coa_with_overlord_canton = TUR_republic_subject			
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TUR_theocracy
		subject_canton = TUR_theocracy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = TUR_subject_GBR
		allow_overlord_canton = yes		
		priority = 50
		trigger = { 
			coa_def_british_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = TUR_subject	
		allow_overlord_canton = yes	
		overlord_canton_offset = { 0.01 0.015 }
		overlord_canton_scale = { 0.48 0.47 }			
		priority = 50
		trigger = { 
			coa_def_french_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = TUR_subject_GBR
		subject_canton = TUR
		allow_overlord_canton = yes			
		priority = 50
		trigger = { 
			coa_def_spanish_ensign_trigger = yes
		}
	}
		flag_definition = {
		coa = TUR_late
		subject_canton = TUR_late
		allow_overlord_canton = yes		
		coa_with_overlord_canton = TUR_subject			
		priority = 90
		trigger = { 
			coa_def_monarchy_flag_trigger = yes
			game_date >= 1844.1.1
		}
	}
	flag_definition = {
		coa = TUR_ottoman_war_flag
		subject_canton = TUR_late
		allow_overlord_canton = yes		
		coa_with_overlord_canton = TUR_subject			
		priority = 100
		trigger = { 
			coa_def_monarchy_flag_trigger = yes
			game_date >= 1844.1.1
			coa_def_war_flag_trigger = yes
			NOT = { has_game_rule = no_war_flags }
		}
	}	
}	

JAP = { # Japan
	flag_definition = {
		coa = JAP
		allow_overlord_canton = yes		
		coa_with_overlord_canton = JAP_subject			
		subject_canton = JAP
		priority = 1		
	}
	flag_definition = {
		coa = JAP_rising_sun
		subject_canton = JAP_rising_sun		
		priority = 100
		trigger = {
			exists = scope:actor
			OR = {
				coa_def_military_junta_flag_trigger = yes
				AND = { 
					scope:actor = { has_variable = meiji_var } 
					coa_def_war_flag_trigger = yes
					coa_def_monarchy_flag_trigger = yes
					NOT = { has_game_rule = no_war_flags }
				}
			}
		}
	}
	flag_definition = {
		coa = JAP_tokugawa
		subject_canton = JAP_tokugawa
		priority = 20
		trigger = {
			exists = scope:actor
			scope:actor = { NOT = { has_variable = meiji_var } }
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = JAP_tokugawa_late
		subject_canton = JAP_tokugawa_late
		priority = 20
		trigger = {
			exists = scope:actor
			scope:actor = { NOT = { has_variable = meiji_var } }
			coa_def_absolute_monarchy_flag_trigger = no
			coa_def_monarchy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = JAP_absolute_monarchy
		subject_canton = JAP_absolute_monarchy
		priority = 20
		trigger = {
			exists = scope:actor
			scope:actor = { has_variable = meiji_var }
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = JAP_republic
		subject_canton = JAP_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = JAP_dictatorship
		subject_canton = JAP_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = JAP_theocracy
		subject_canton = JAP_theocracy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = JAP_usa
		priority = 30
		trigger = { 
			coa_def_american_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = JAP_fascist
		subject_canton = JAP_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}	
}

SPA = { # Spain
	flag_definition = {
		coa = SPA
		subject_canton = SPA
		coa_with_overlord_canton = SPA_subject
		allow_overlord_canton = yes
	}
	flag_definition = {
		coa = SPA_republic
		subject_canton = SPA_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_absolute_monarchy
		subject_canton = SPA_absolute_monarchy	
		priority = 10
		trigger = { 
			OR = {
				coa_def_absolute_monarchy_flag_trigger = yes
				AND = {
					NOT = { has_game_rule = no_war_flags }
					coa_def_war_flag_trigger = yes
					coa_def_monarchy_flag_trigger = yes
					OR = {
						game_date <= 1844.1.1
						coa_def_spa_bur_cross_override_trigger = yes
					}
				}
			}
		}
	}
	flag_definition = {
		coa = SPA_dictatorship
		subject_canton = SPA_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = SPA_communist
		subject_canton = SPA_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}		
	flag_definition = {
		coa = SPA_theocracy
		subject_canton = SPA_theocracy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = SPA_subject_GBR
		allow_overlord_canton = yes		
		priority = 50
		trigger = { 
			coa_def_british_ensign_trigger = yes
		}
	}		
}

PRU = { # Prussia
	flag_definition = {
		coa = PRU	
		subject_canton = PRU
		allow_overlord_canton = yes	
		coa_with_overlord_canton = PRU_subject	
		overlord_canton_scale = { 0.337 0.337 }			
		priority = 1
	}
	flag_definition = {
		coa = PRU_teutonic_order
		subject_canton = PRU_teutonic_order
		allow_overlord_canton = yes
		overlord_canton_scale = { @canton_scale_cross_x @canton_scale_cross_y }
		priority = 5		
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = PRU_republic
		subject_canton = PRU_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = PRU_absolute_monarchy
		subject_canton = PRU_absolute_monarchy
		allow_overlord_canton = yes	
		coa_with_overlord_canton = PRU_subject	
		overlord_canton_scale = { 0.337 0.337 }				
		priority = 20
		trigger = {
			coa_def_monarchy_flag_trigger = yes 
			OR = {
				game_date >= 1892.1.1					
				coa_def_pru_striped_flag_override_trigger = yes
			}
		}
	}	
	flag_definition = {
		coa = PRU_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = PRU_fascist
		subject_canton = PRU_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}	
}

RUS = { # Russia
	flag_definition = {
		coa = RUS_imperial
		allow_overlord_canton = yes		
		subject_canton = RUS_imperial
		priority = 1
		trigger = {
			OR = {
				AND = {
					coa_def_monarchy_flag_trigger = yes
					coa_def_rus_vanilla_flag_override_trigger = no
					coa_def_rus_modern_flag_override_trigger = no
					coa_def_rus_imperial_flag_override_trigger = no				
				}
				AND = {
					coa_def_monarchy_flag_trigger = yes
					coa_def_rus_vanilla_flag_override_trigger = no
					coa_def_rus_modern_flag_override_trigger = no
					coa_def_rus_imperial_flag_override_trigger = yes
				}
			}
		}
	}
	flag_definition = {
		coa = RUS_absolute_monarchy
		subject_canton = RUS 
		priority = 20
		trigger = { 
			OR = {
				AND = {
					coa_def_absolute_monarchy_flag_trigger = yes
					coa_def_rus_vanilla_flag_override_trigger = no
					coa_def_rus_modern_flag_override_trigger = no
					coa_def_rus_imperial_flag_override_trigger = no				
				}
				AND = {
					coa_def_monarchy_flag_trigger = yes
					coa_def_rus_vanilla_flag_override_trigger = yes
					coa_def_rus_modern_flag_override_trigger = no
					coa_def_rus_imperial_flag_override_trigger = no
				}
			}
		}
	}	
	flag_definition = {
		coa = RUS_republic
		subject_canton = RUS_republic
		priority = 10
		trigger = { 
			OR = {
				AND = {
					coa_def_republic_flag_trigger = yes
					coa_def_rus_vanilla_flag_override_trigger = no
					coa_def_rus_modern_flag_override_trigger = no
					coa_def_rus_imperial_flag_override_trigger = no				
				}				
				AND = {
					coa_def_monarchy_flag_trigger = yes
					coa_def_rus_vanilla_flag_override_trigger = no
					coa_def_rus_modern_flag_override_trigger = yes
					coa_def_rus_imperial_flag_override_trigger = no
				}
			}
		}
	}		
	flag_definition = {
		coa = RUS_dictatorship
		subject_canton = RUS_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = RUS_oligarchy
		subject_canton = RUS_oligarchy
		priority = 25
		trigger = {
			coa_def_oligarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = RUS_soviet_union
		priority = 1500 # need to override the DEFAULT
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = RUS_fascist
		subject_canton = RUS_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = RUS_theocracy
		subject_canton = RUS_theocracy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
}	

CHI = { # China
	flag_definition = {
		coa = CHI_han_empire
		coa_with_overlord_canton = CHI_han_empire
		priority = 5
		trigger = {
			AND = {
				NOT = { scope:actor = { country_has_primary_culture = cu:manchu }	}
				coa_def_monarchy_flag_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = CHI
		subject_canton = CHI
		coa_with_overlord_canton = CHI_subject
		allow_overlord_canton = yes		
		priority = 1
	}
	flag_definition = {
		coa = CHI_absolute_monarchy
		subject_canton = CHI_absolute_monarchy
		coa_with_overlord_canton = CHI_subject
		allow_overlord_canton = yes				
		priority = 20
		trigger = {
			AND = {
				scope:actor = { country_has_primary_culture = cu:manchu }
				coa_def_absolute_monarchy_flag_trigger = yes
			} 
		}
	}	
	flag_definition = {
		coa = CHI_republic
		subject_canton = CHI_republic
		allow_overlord_canton = yes
		priority = 25
		trigger = { 
			OR = {
				coa_def_republic_flag_trigger = yes
				AND = {
					coa_def_chi_republic_vanilla_override_trigger = yes
					coa_def_dictatorship_flag_trigger = yes
				}
			}
		}
	}	
	flag_definition = {
		coa = CHI_dictatorship
		subject_canton = CHI_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CHI_theocracy
		subject_canton = CHI_theocracy
		subject_canton = CHI_absolute_monarchy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CHI_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
			NOT = {
				coa_def_chi_communist_alt_mao_1_override_trigger = yes
				coa_def_chi_communist_alt_mao_2_override_trigger = yes
				coa_def_chi_communist_alt_mao_3_override_trigger = yes
				coa_def_chi_communist_alt_ai_qing_override_trigger = yes									
			}
		}
	}
	flag_definition = {
		coa = CHI_communist_alt_mao_1
		priority = 1600
		trigger = { 
			coa_def_communist_flag_trigger = yes
			coa_def_chi_communist_alt_mao_1_override_trigger = yes
		}
	}
	flag_definition = {
		coa = CHI_communist_alt_mao_2
		priority = 1600
		trigger = { 
			coa_def_communist_flag_trigger = yes
			coa_def_chi_communist_alt_mao_2_override_trigger = yes			
		}
	}
	flag_definition = {
		coa = CHI_communist_alt_mao_3
		priority = 1600
		trigger = { 
			coa_def_communist_flag_trigger = yes
			coa_def_chi_communist_alt_mao_3_override_trigger = yes			
		}
	}
	flag_definition = {
		coa = CHI_communist_alt_ai_qing
		priority = 1600
		trigger = { 
			coa_def_communist_flag_trigger = yes
			coa_def_chi_communist_alt_ai_qing_override_trigger = yes			
		}
	}
	flag_definition = {
		coa = CHI_republic_roc_flag
		subject_canton = CHI_kmt_flag
		priority = 100
		trigger = {
			OR = {
				coa_def_chi_republic_alt_roc_override_trigger = yes
				AND = {
					coa_def_chi_republic_alt_roc_override_trigger = yes
					coa_def_dictatorship_flag_trigger = yes
				}
			}
		}
	}
	flag_definition = {
		coa = CHI_kmt_flag
		subject_canton = CHI_kmt_flag
		priority = 100
		trigger = {			
			OR = {
				AND = {
					coa_def_chi_republic_alt_kmt_override_trigger = yes
					coa_def_republic_flag_trigger = yes
				}
				AND = {
					NOT = { coa_def_chi_republic_vanilla_override_trigger = yes }
					coa_def_dictatorship_flag_trigger = yes
				}
			}
		}
	}			
	flag_definition = {
		coa = CHI_prc_cwpra_war_flag
		subject_canton = CHI_communist
		priority = 2000
		trigger = { 
			coa_def_communist_flag_trigger = yes
			coa_def_war_flag_trigger = yes
			OR = {
				NOT = {
					coa_def_professional_army_flag_trigger = yes
					coa_def_chi_pla_warflag_override_trigger = yes
				}
				coa_def_chi_cwpra_warflag_override_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = CHI_prc_pla_war_flag
		subject_canton = CHI_communist
		priority = 2000
		trigger = { 
			coa_def_communist_flag_trigger = yes
			coa_def_war_flag_trigger = yes
			OR = {
				coa_def_chi_pla_warflag_override_trigger = yes
				coa_def_professional_army_flag_trigger = yes
			}	
		}
	}
	flag_definition = {
		coa = CHI_roc_nra_war_flag
		subject_canton = CHI_kmt_flag
		priority = 2000
		trigger = {
			NOT = { coa_def_communist_flag_trigger = yes }
			coa_def_war_flag_trigger = yes
			coa_def_republic_flag_trigger = yes	
			OR = {
				AND = {
					coa_def_chi_republic_alt_roc_override_trigger = yes
					NOT = {	coa_def_chi_wuhan_warflag_override_trigger = yes }
				}		
				coa_def_chi_nra_warflag_override_trigger = yes
			}
		}
	}
	flag_definition = {
		coa = CHI_wuhan_war_flag
		priority = 200
		trigger = {
			NOT = { coa_def_communist_flag_trigger = yes }			
			coa_def_war_flag_trigger = yes
			coa_def_republic_flag_trigger = yes
			coa_def_chi_wuhan_warflag_override_trigger = yes
		}
	}										
}

HAN = { # Hannover
	flag_definition = {
		coa = HAN
		allow_overlord_canton = yes		
		coa_with_overlord_canton = HAN_subject
		subject_canton = HAN
		priority = 1
	}
	flag_definition = {
		coa = HAN_subject_GBR
		priority = 100
		trigger = { 
			coa_def_british_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = HAN_absolute_monarchy
		subject_canton = HAN_absolute_monarchy
		priority = 20
		trigger = { 
			coa_def_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = HAN_republic
		subject_canton = HAN_republic
		allow_overlord_canton = yes		
		coa_with_overlord_canton = HAN_subject		
		priority = 20
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = HAN_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = HAN_subject	
		subject_canton = HAN		
		allow_overlord_canton = yes	
		overlord_canton_offset = { 0.01 0.015 }
		overlord_canton_scale = { 0.48 0.47 }			
		priority = 50
		trigger = { 
			coa_def_french_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = HAN_subject_gold
		subject_canton = HAN
		allow_overlord_canton = yes	
		overlord_canton_offset = { 0.01 0.015 }
		overlord_canton_scale = { 0.48 0.47 }			
		priority = 50
		trigger = { 
			coa_def_spanish_ensign_trigger = yes
		}
	}	
	flag_definition = {
		coa = HAN_subject_PRU
		priority = 50
		trigger = { 
			coa_def_prussian_ensign_trigger = yes
		}
	}	
}

SAR = { # Sardignia-Piedmont
	flag_definition = {
		coa = SAR
		subject_canton = SAR_canton
		coa_with_overlord_canton = SAR_subject
		overlord_canton_offset = { 0.067 0.1 }
		overlord_canton_scale = { 0.4 0.4 }			
		allow_overlord_canton = yes		
		priority = 1
	}
	flag_definition = {
		coa = SAR_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = SAR_republic_tricolor
		subject_canton = SAR_republic_tricolor
		priority = 20
		trigger = { 
			coa_def_republic_flag_trigger = yes
			exists = scope:actor
			scope:actor = {
				has_technology_researched = nationalism
			}			
		}
	}
	flag_definition = {
		coa = ITA
		subject_canton = ITA
		priority = 20
		trigger = { 
			coa_def_monarchy_flag_trigger = yes
			exists = scope:actor
			scope:actor = {
				has_technology_researched = nationalism
			}
		}
	}
	flag_definition = {
		coa = ITA_war
		subject_canton = ITA
		priority = 200
		trigger = {
			coa_def_monarchy_flag_trigger = yes
			coa_def_war_flag_trigger = yes
			scope:actor = {
				has_technology_researched = nationalism
			}			
			NOT = { has_game_rule = no_war_flags }
		}
	}			
	flag_definition = {
		coa = SAR_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = SAR_subject_GBR
		allow_overlord_canton = yes	
		overlord_canton_offset = { 0.067 0.1 }
		overlord_canton_scale = { 0.4 0.4 }			
		priority = 50
		trigger = { 
			coa_def_british_ensign_trigger = yes
		}
	}		
}

ITA = { # Italy
	flag_definition = {
		coa = ITA_republic
		subject_canton = ITA_republic
		priority = 1
	}
	flag_definition = {
		coa = ITA_republic
		subject_canton = ITA_republic		
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA
		subject_canton = ITA
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				was_formed_from = SAR
			}
			coa_def_monarchy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_sicily
		subject_canton = ITA_sicily
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				was_formed_from = SIC
			}
			coa_def_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_pope
		subject_canton = ITA_pope
		priority = 300
		trigger = {
			coa_def_theocracy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_venice
		subject_canton = ITA_venice
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				was_formed_from = VEN
			}
		}
	}							
	flag_definition = {
		coa = ITA_dictatorship
		subject_canton = ITA_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = ITA_fascist
		subject_canton = ITA_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = ITA_rome_war
		subject_canton = ITA_republic
		priority = 200
		trigger = {
			exists = scope:actor
			scope:actor = {
				was_formed_from = PAP
			}
			coa_def_republic_flag_trigger = yes
			coa_def_war_flag_trigger = yes
			NOT = { has_game_rule = no_war_flags }
		}
	}
	flag_definition = {
		coa = ITA_war
		subject_canton = ITA
		priority = 200
		trigger = {
			exists = scope:actor
			scope:actor = {
				was_formed_from = SAR
			}
			coa_def_monarchy_flag_trigger = yes
			coa_def_war_flag_trigger = yes
			NOT = { has_game_rule = no_war_flags }
		}
	}	
}

PAP = { # Papal States
	flag_definition = {
		coa = PAP
		allow_overlord_canton = yes		
		subject_canton = PAP
		priority = 1
	}
	flag_definition = {
		coa = PAP_theocracy
		allow_overlord_canton = yes		
		priority = 10
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = PAP_republic
		allow_overlord_canton = yes			
		overlord_canton_scale = { 0.337 0.337 }			
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = PAP_republic_war
		allow_overlord_canton = yes			
		overlord_canton_scale = { 0.337 0.337 }			
		priority = 200
		trigger = { 
			coa_def_republic_flag_trigger = yes
			coa_def_war_flag_trigger = yes
			NOT = { has_game_rule = no_war_flags }
		}
	}	
	flag_definition = {
		coa = PAP_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = PAP_fascist
		subject_canton = PAP_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}	
}