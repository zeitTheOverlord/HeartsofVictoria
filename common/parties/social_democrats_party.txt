# Social democrats extremely attracted to this ideology
# Attracts weak leftists and liberals
# Available for Trade Unions pre-Socialism

social_democrat_party = {
	color = { 241 24 138 }
	name = {
		first_valid = {
			triggered_desc = {
				desc = party_diggers
				trigger = {
					country_has_primary_culture = cu:british
					NOT = { has_technology_researched = socialism }
				}
			}
			triggered_desc = {
				desc = party_labour_party
				trigger = {
					exists = c:GBR
					THIS = c:GBR
				}
			}
			triggered_desc = {
				desc = party_psoe
				trigger = {
					exists = c:SPA
					THIS = c:SPA
				}
			}
			triggered_desc = {
				desc = party_labour_party
				trigger = {
					exists = c:IRE
					THIS = c:IRE
				}
			}
			triggered_desc = {
				desc = party_portuguese_socialist_party
				trigger = {
					exists = c:POR
					THIS = c:POR
				}
			}
			triggered_desc = {
				desc = party_ftsf
				trigger = {
					exists = c:FRA
					THIS = c:FRA
				}
			}
			triggered_desc = {
				desc = party_menshevik_party
				trigger = {
					exists = c:RUS
					THIS = c:RUS
				}
			}
			triggered_desc = {
				desc = party_finnish_labor_party
				trigger = {
					exists = c:FIN
					THIS = c:FIN
				}
			}
			triggered_desc = {
				desc = party_belgian_workers_party
				trigger = {
					exists = c:BEL
					THIS = c:BEL
				}
			}
			triggered_desc = {
				desc = party_sdapo
				trigger = {
					exists = c:AUS
					THIS = c:AUS
				}
			}
			triggered_desc = {
				desc = party_brsdp
				trigger = {
					exists = c:BUL
					THIS = c:BUL
				}
			}
			triggered_desc = {
				desc = party_mszdp
				trigger = {
					exists = c:HUN
					THIS = c:HUN
				}
			}
			triggered_desc = {
				desc = party_social_democratic_workers_party
				trigger = {
					exists = c:NET
					THIS = c:NET
				}
			}
			triggered_desc = {
				desc = party_common_peoples_party
				trigger = {
					exists = c:JAP
					THIS = c:JAP
				}
			}
			triggered_desc = {
				desc = party_democrat_party
				trigger = {
					exists = c:PER
					THIS = c:PER
				}
			}
			triggered_desc = {
				desc = party_socialist_workers_federation
				trigger = {
					exists = c:TUR
					THIS = c:TUR
				}
			}
			triggered_desc = {
				desc = party_laborist_party
				trigger = {
					exists = c:MEX
					THIS = c:MEX
				}
			}
			triggered_desc = {
				desc = party_confederate_socialist_party
				trigger = {
					exists = c:CSA
					THIS = c:CSA
				}
			}
			triggered_desc = {
				desc = party_seke
				trigger = {
					exists = c:GRE
					THIS = c:GRE
				}
			}
			triggered_desc = {
				desc = party_labor_party
				trigger = {
					country_has_primary_culture = cu:norwegian
				}
			}
			triggered_desc = {
				desc = party_socialist_labor_party
				trigger = {
					country_has_primary_culture = cu:anglo_canadian
				}
			}
			triggered_desc = {
				desc = party_labor_party
				trigger = {
					country_has_primary_culture = cu:franco_canadian
				}
			}
			triggered_desc = {
				desc = party_social_democratic_workers_party
				trigger = {
					country_has_primary_culture = cu:romanian
				}
			}
			triggered_desc = {
				desc = party_sdp
				trigger = {
					OR = {
						country_has_primary_culture = cu:north_german
						country_has_primary_culture = cu:south_german
					}
				}
			}
			triggered_desc = {
				desc = party_psi
				trigger = {
					OR = {
						country_has_primary_culture = cu:north_italian
						country_has_primary_culture = cu:south_italian
					}
				}
			}
			triggered_desc = {
				desc = party_socialist_party_of_america
				trigger = {
					country_has_primary_culture = cu:yankee
				}
			}
			triggered_desc = {
				desc = party_social_democrats
				trigger = {
					always = yes
				}
			}
		}
	}
	
	icon = {
		default = "/gfx/interface/icons/political_parties/social_democrats.dds"
	}
	unlocking_technologies = {
		labor_movement
	}
	# THIS IS RUN ONLY ONCE AT GAME START
	valid_for_country = {
		always = yes
	}
	available_for_interest_group = {
		owner = {
			country_has_voting_franchise = yes
			OR = {
				any_interest_group = {
					is_marginal = no
					leader = {
						has_ideology = ideology_social_democrat
					}
				}
				ig:ig_trade_unions = {
					is_marginal = no
				}
			}
		}
		NOT = { # these ig's are inherently anti-worker
			is_interest_group_type = ig_landowners
			is_interest_group_type = ig_industrialists
		}
		leader = { # fascists and conservatives hate social democracy
			NOT = {
				has_ideology = ideology_fascist
				has_ideology = ideology_ethno_nationalist
				has_ideology = ideology_traditionalist
				has_ideology = ideology_royalist
				has_ideology = ideology_theocrat
			}
		}
	}
	join_weight = {
		value = {
			value = -5
			desc = "base_value"
		}
		if = { # social democrats love social democracy, changed
			limit = {
				is_interest_group_type = ig_trade_unions #added
				leader = {
					#OR = {
					#	has_ideology = ideology_social_democrat
					#	has_ideology = ideology_moderate
					#}
					NOR = { #added
						has_ideology = ideology_radical
						has_ideology = ideology_communist
						has_ideology = ideology_vanguardist
						has_ideology = ideology_anarchist
					}
				}
			}
			add = {	
				value = 20 #5
				desc = from_social_democrat
			}
		}
		if = { # powerful social democrats love social democracy
			limit = {
				is_powerful = yes
				leader = {
					has_ideology = ideology_social_democrat
				}
			}
			add = {	
				value = 5
				desc = from_social_democrat_powerful
			}
		}
		if = { # social democrats will fall in line behind stronger leftists
			limit = {
				leader = {
					has_ideology = ideology_social_democrat
				}
				is_powerful = no
				owner = {
					any_interest_group = {
						is_powerful = yes
						leader = {
							OR = {
								has_ideology = ideology_communist
								has_ideology = ideology_vanguardist
								has_ideology = ideology_anarchist
							}
						}
					}
				}
			}
			add = {	
				value = 5
				desc = from_powerful_communists
			}
		}
		if = { # weak leftists will fall in line behind social democrats pre-revolution
			limit = {
				is_powerful = no
				leader = {
					OR = {
						has_ideology = ideology_communist
						has_ideology = ideology_vanguardist
						has_ideology = ideology_anarchist
					}
				}
				owner = {
					#NOT = { has_law = law_type:law_council_republic }
					has_radical_leftist_government = no #added
					any_interest_group = {
						is_powerful = yes
						leader = {
							has_ideology = ideology_social_democrat
						}
					}
				}
			}
			add = 6
			desc = from_weak_communists
		}
		# weak liberals might fall in line behind strong social democrats
		if = {
			limit = { #changed
				#is_powerful = no
				ig_clout < 0.1
				has_ideology = ideology_liberal
				owner = {
					any_interest_group = {
						is_interest_group_type = ig_trade_unions #added
						is_powerful = yes
						is_member_of_party = owner.py:social_democrat_party #added
						#leader = {
						#	has_ideology = ideology_social_democrat
						#}
					}
					any_interest_group = { #added
						is_interest_group_type = ig_industrialists 
						is_marginal = yes
					}
				}
			}
			add = {	
				value = 20 #5
				desc = from_weak_liberals
			}
		}
		if = { # various progressives are inclined towards social democracy
			limit = { #added
				OR = {
					is_interest_group_type = ig_armed_forces
					is_interest_group_type = ig_rural_folk					
				}	
				leader = { #changed
					OR = {
						has_ideology = ideology_feminist
						has_ideology = ideology_abolitionist
						has_ideology = ideology_pacifist
						#has_ideology = ideology_radical
						#has_ideology = ideology_reformer
						has_ideology = ideology_republican_leader
						has_ideology = ideology_atheist
						has_ideology = ideology_social_democrat #added
					}
				}
			}
			add = {	
				value = 10 #5
				desc = from_progressivism_sd
			}
		}
		# market liberals not very inclined to join social democrats
		if = {
			limit = {
				leader = {
					has_ideology = ideology_market_liberal
				}
			}
			add = {	
				value = -5
				desc = from_marked_liberal_sd
			}
		}
		if = { # generic powerful trade unions party, changed
			limit = {
				is_interest_group_type = ig_trade_unions
				is_powerful = yes
				leader = {
					NOR = {
						has_ideology = ideology_communist
						has_ideology = ideology_vanguardist
						has_ideology = ideology_anarchist
					}
				}
			}
			add = {	
				value = 6 #5, tie-brecher
				desc = from_powerful_unions
			}
		}
		#########################
		###ADDED
		#########################
		if = { #Mehrparteiensystem
			limit = {
				owner = {
					OR = {
						has_law = law_type:law_parliamentary_republic
						has_law = law_type:law_council_republic
					}
				}
				is_interest_group_type = ig_trade_unions
				ig_clout >= 0.1
				leader = {
					NOR = {
						has_ideology = ideology_radical
						has_ideology = ideology_communist
						has_ideology = ideology_vanguardist
						has_ideology = ideology_anarchist
						has_ideology = ideology_fascist
						has_ideology = ideology_ethno_nationalist
					}
				}
			}
			add = {
				value = 50
				desc = "SMMP_MEHRPARTEIENSYSTEM"
			}
		}
		if = { # Reaktionäre kaum in Sozialdemokratischer Partei
			limit = {
				has_ideology = ideology_reactionary
			}
			add = {
				value = -20
				desc = "from_reactionaries"
			}
		}
		if = { # Patriarchische kaum in Sozialdemokratischer Partei
			limit = {
				has_ideology = ideology_patriarchal
			}
			add = {
				value = -20
				desc = "SMMP_PATRIARCHAL"
			}
		}
		if = { #Unzufriedene IGs treten aus
			limit = {
				owner = {
					any_active_party = {
						is_party_type = social_democrat_party
						any_member = {
							is_in_government = yes
						}
					}
				}
				NOT = { is_interest_group_type = ig_trade_unions }
				ig_approval < -15
			}
			add = {
				value = -75
				desc = "SMMP_ANGRYIG"
			}
		}
		if = { #Marginalisierte IGs treten aus
			limit = {
				ig_clout < 0.03
			}
			add = {
				value = -1000
				desc = "IG_IS_MARGINALIZED"
			}
		}
	}
}
